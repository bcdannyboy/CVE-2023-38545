#!/bin/bash

# Check if the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Update package list
apt update

# Install Dante server
apt install -y dante-server

# Create Dante configuration file
cat <<EOL > /etc/danted.conf
logoutput: /var/log/danted.log
internal: 0.0.0.0 port = 1080
external: eth0
method: username none
user.privileged: proxy
user.notprivileged: nobody

client pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    log: connect disconnect error
}

pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    command: bind connect udpassociate
    log: error
    method: none
}
EOL

# Start Dante service
systemctl enable danted
systemctl start danted

# Display status
systemctl status danted

echo "Dante SOCKS5 proxy is set up and running on port 1080."

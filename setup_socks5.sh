#!/bin/bash

# Check if ssh command is available
if ! command -v ssh &> /dev/null; then
    echo "ssh command not found. Please install ssh to proceed."
    exit 1
fi

# Kill any existing SSH process running on port 1080
pkill -f "ssh -N -g -D 0.0.0.0:1080"

# Remove localhost from known_hosts to avoid host key verification issues
ssh-keygen -R localhost

# Set up SOCKS5 proxy on port 1080 and make it accessible from anywhere
nohup ssh -N -g -D 0.0.0.0:1080 localhost &> /dev/null &

echo "SOCKS5 proxy set up on port 1080 and accessible from anywhere"
